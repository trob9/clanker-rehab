<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clanker Rehab: Thinking is BACK</title>
    <link rel="stylesheet" href="/static/codemirror/codemirror.css">
    <link rel="stylesheet" href="/static/codemirror/monokai.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="app">
        <header>
            <div>
                <h1>Clanker Rehab</h1>
                <p id="rotating-quote"></p>
            </div>
            <button id="settings-btn">Settings</button>
        </header>

        <div id="main-container">
            <div id="left-panel" class="panel">
                <div id="difficulty-filters">
                    <button class="filter-btn beginner active" data-difficulty="beginner">Beginner</button>
                    <button class="filter-btn intermediate" data-difficulty="intermediate">Intermediate</button>
                    <button class="filter-btn advanced" data-difficulty="advanced">Advanced</button>
                </div>
                <div id="search-container">
                    <input type="text" id="search-input" placeholder="Search concepts...">
                </div>
                <h2>Unlearned Concepts</h2>
                <div id="categories"></div>
            </div>

            <div id="center-panel" class="panel">
                <div id="current-concept">
                    <div style="display: flex; justify-content: space-between; align-items: baseline;">
                        <h3 id="concept-title">Select a concept to begin</h3>
                        <button id="teach-btn" style="display: none;" title="Learn more about this concept">?</button>
                    </div>
                    <p id="concept-instruction"></p>
                    <p id="possum-credit" style="display: none;">Or kick back and admire this ASCII art of a Brushtail Possum by Rowan Crawford.</p>
                </div>
                <div id="editor-container">
                    <textarea id="code-editor"></textarea>
                </div>
                <div id="editor-controls">
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="run-btn">â–¶ Run Code</button>
                        <button id="reset-btn">â†» Reset</button>
                        <button id="show-answer-btn" style="display: none;">ðŸ’¡ Show Answer</button>
                        <button id="show-tests-btn" style="display: none;">Show Tests</button>
                    </div>
                </div>
                <div id="output">
                    <strong>Output:</strong>
                    <pre id="output-content"></pre>
                </div>
            </div>

            <div id="right-panel" class="panel">
                <h2>Learned Concepts</h2>
                <div id="learned-list"></div>
            </div>
        </div>

        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Settings</h2>
                <label>
                    Default expiry days:
                    <input id="expiry-days" type="number" min="1" max="365" value="14">
                </label>
                <button id="save-settings">Save</button>
            </div>
        </div>

        <div id="teaching-modal" class="modal">
            <div class="modal-content teaching-modal-content">
                <span class="close-teaching">&times;</span>
                <h2 id="teaching-title"></h2>
                <div id="teaching-content">
                    <section id="teaching-explanation">
                        <h3>Explanation</h3>
                        <p id="teaching-explanation-text"></p>
                    </section>
                    <section id="teaching-example">
                        <h3>Example</h3>
                        <pre id="teaching-example-code"></pre>
                    </section>
                    <section id="teaching-usecase">
                        <h3>When to Use</h3>
                        <p id="teaching-usecase-text"></p>
                    </section>
                    <section id="teaching-prerequisites">
                        <h3>Before this, you should understand:</h3>
                        <ul id="teaching-prerequisites-list"></ul>
                    </section>
                    <section id="teaching-related">
                        <h3>Related Concepts</h3>
                        <ul id="teaching-related-list"></ul>
                    </section>
                    <section id="teaching-docs">
                        <h3>Documentation</h3>
                        <a id="teaching-docs-link" target="_blank"></a>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <div id="wasm-status" style="position:fixed;bottom:10px;right:10px;padding:4px 10px;border-radius:4px;font-size:0.75rem;color:#ccc;background:#4a3a2d;z-index:100;">Loading WASM...</div>

    <script src="/static/codemirror/codemirror.js"></script>
    <script src="/static/codemirror/go.js"></script>
    <script src="/static/codemirror/closebrackets.js"></script>
    <script src="/static/script.js"></script>
</body>
</html>
